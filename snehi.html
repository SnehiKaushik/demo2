<!-- Code Generated by Sidekick is for learning and experimentation purposes only. -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAP Datasphere CLI Guide</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 20px;
        }
        h1, h2, h3 {
            color: #2c3e50;
        }
        code {
            background-color: #f4f4f4;
            padding: 2px 4px;
            border-radius: 4px;
        }
        pre {
            background-color: #f4f4f4;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
        }
        ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        li {
            margin-bottom: 5px;
        }
    </style>
</head>
<body>

    <h1>SAP Datasphere CLI Guide</h1>
    <p><strong>Issue Date:</strong> 2025-04-09</p>
    <p><strong>Contributed by:</strong> Saikumar, Analyst, Hyderabad Office</p>

    <h2>Accessing SAP Datasphere tenant through CLI</h2>
    <p>The <code>@sap/datasphere cli</code> (Node.js package) tool is a Node.js command line interface (CLI) for SAP Datasphere. It allows users to manage their SAP Datasphere account via the terminal (command prompt). This tool helps automate tasks and saves time on repetitive manual work.</p>

    <h3>Installing and Configuring the CLI:</h3>
    <ul>
        <li>Install Node.js and npm with these versions:
            <ul>
                <li>Node.js: 18 to 22</li>
                <li>npm: 8 to 10 (npm comes with Node.js)</li>
            </ul>
        </li>
        <li>Install CLI: go to command prompt and enter the below command:
            <pre><code>npm install -g @sap/datasphere cli</code></pre>
        </li>
        <li>Check if the installation worked:
            <pre><code>datasphere version</code></pre>
        </li>
        <li>Set a Host Value for Your SAP Datasphere:
            <ul>
                <li>Set URL: <code>datasphere config host set</code></li>
                <li>View current URL: <code>datasphere config host show</code></li>
                <li>Remove URL: <code>datasphere config host clean</code></li>
            </ul>
        </li>
    </ul>

    <h3>Login to Datasphere tenant through CLI:</h3>
    <p>To log into a datasphere tenant via CLI, we have two options:</p>
    <ul>
        <li>Using OAuth Client ID:
            <ul>
                <li>Users with DW Administrator role or equivalent privileges can create OAuth Client and details can be shared with others.</li>
                <li>Get the Authorization URL, Token URL, Client ID, and Secret key of the Client.</li>
                <li>In the command line execute the command:
                    <pre><code>datasphere login</code></pre>
                </li>
                <li>Enter the client ID, Secret key, Authorization URL, and Token URL.</li>
                <li>Execute the command:
                    <pre><code>datasphere config secrets show</code></pre>
                    to see the client id logged in.
                </li>
                <li>We can also pass the client details to the command line as an input file containing client details in JSON format using the secrets file option in the <code>datasphere login</code> command
                    <pre><code>datasphere login secrets file .json</code></pre>
                </li>
                <li>We can logout from the tenant with the command:
                    <pre><code>datasphere logout login id</code></pre>
                    By default, when you omit the option <code>login id</code> the login/secret with ID 0 is removed.
                </li>
            </ul>
        </li>
        <li>Temporary Authentication Code:
            <ul>
                <li>Run a command on datasphere tenant without OAuth login. CLI will ask for a temporary auth code</li>
                <li>Type “Y” and enter. It will open a webpage in the browser to login to the datasphere with your credentials, so that a temporary authentication code generates</li>
                <li>Enter this code in the CLI each time you run a command.</li>
                <li>By refreshing the webpage containing temporary authentication code we can get new authentication code and we can pass the temp auth code as an option to the command
                    <pre><code>datasphere global—roles users list ——role Data_Warehouse_Ctoud_Administrator passcode Tg2iA2tPdmmmVh8HHXfn1011LS1kNZHB</code></pre>
                </li>
            </ul>
        </li>
    </ul>

    <p><strong>Note:</strong> Once the host set up is completed, execute the below command to download the file of available datasphere commands from the SAP Datasphere instance
        <pre><code>datasphere config cache init</code></pre>
    </p>

    <h3>Operations that can be performed on Datasphere using CLI:</h3>
    <p>We can do most of the datasphere operations through CLI. With <code>datasphere config</code> command and its options, we can perform actions like:</p>
    <ul>
        <li>cache: work with the local CLI cache</li>
        <li>host: configure host properties</li>
        <li>secrets: work with the locally stored secrets</li>
    </ul>

    <p>Users with DW Administrator or equivalent privileges can perform password reset action on the database users using the command <code>datasphere dbusers</code> by providing the space and database user id</p>
    <p>Example command:
        <pre><code>datasphere dbusers password reset</code></pre>
    </p>

    <p>Users with a DW Administrator role (or with equivalent privileges) can list and read global roles, add users to roles, and remove users from roles via the CLI. Note: You cannot create or delete global roles via the command line.</p>

    <p>Users with a modeler role can use the datasphere command line interface to manage the Data Marketplace. They can create, update, and view data providers. The CLI also allows them to manage data products, including creating, updating, listing, and deleting them, as well as handling product releases, licenses, and contexts.</p>

    <p>Users with a modeler role can utilize the Datasphere(CLI) to list, create, update, and delete modeling objects. However, it is important to note that operations such as managing connections, folders, or packages, as well as assigning modeling objects to folders or packages using the create and update commands, are not supported.</p>

    <p>Users with a DW Administrator role (or with equivalent privileges) can create, read, update, and delete scoped roles via the command line. And users with necessary privileges can remove users from the scoped roles, remove the spaces/scopes from the scoped roles, delete the scoped roles.</p>

    <p>Users with an administrator role can use the datasphere CLI to create, read, update, and delete spaces. Users with a space administrator role can update some space properties, add (or remove) users, database users and HDI containers and delete spaces.</p>

    <p>Users with the 'integrator' role can use the datasphere CLI to manage tasks and task chains. This includes checking consent status, granting or withdrawing consent, running task chains and accessing task logs.
        <pre><code>datasphere tasks chains run space GE147846 object Task_Chain_3
datasphere tasks logs list space GE147846 object Task_Chain_3</code></pre>
    </p>

    <p>Users with a DW Administrator role (or with equivalent privileges) can list, create, update, and delete users via the command line.</p>

    <p>Users with the DW Administrator role (or equivalent privileges) can set space priorities and statement limits for spaces using the <code>datasphere workload</code> command through CLI.</p>

    <p>Users with an integrator role (or equivalent privileges) can list, validate, and delete connections and read connection details via the command line. Additionally, they can create and edit connections for various connection types. Connections within a space can be created by providing a JSON file definition.</p>

    <p><strong>Limitations:</strong></p>
    <p>Advantages</p>

</body>
</html>
